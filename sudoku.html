<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku æ•¸ç¨</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
    background-color: #f0f8ff; /* æ·¡è—è‰²èƒŒæ™¯ */
    color: #333;
    padding: 20px;
}

h1 {
    color: #4a4a4a;
}

#game-container {
    max-width: 500px;
    margin: 0 auto;
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* --- æ•¸ç¨éŠæˆ²ç›¤æ¨£å¼ --- */
#sudoku-grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    grid-template-rows: repeat(9, 1fr);
    width: 450px; 
    height: 450px; 
    margin: 20px auto;
    border: 3px solid #000; /* æœ€å¤–å±¤é‚Šæ¡† */
}

.cell {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 1px solid #ddd;
    font-size: 24px;
    font-weight: 500;
    cursor: pointer;
    box-sizing: border-box; 
    transition: background-color 0.2s;
}

/* é¡Œç›®çµ¦å®šçš„æ•¸å­— (å›ºå®šä¸å¯æ›´æ”¹) */
.fixed-cell {
    background-color: #e9e9e9;
    color: #000;
    font-weight: bold;
    cursor: default;
}

/* ä½¿ç”¨è€…è¼¸å…¥çš„æ•¸å­— */
.user-input {
    color: #007bff; /* è—è‰² */
}

/* ç•¶å‰é¸ä¸­çš„æ ¼å­ */
.selected {
    background-color: #fffacd !important; /* æ·ºé»ƒè‰²é«˜äº® */
    border: 1px solid #007bff;
}

/* éŒ¯èª¤çš„æ•¸å­— (æª¢æŸ¥å¾Œé¡¯ç¤º) */
.error {
    background-color: #ffcdd2 !important; /* æ·ºç´…è‰²èƒŒæ™¯ */
    color: #d32f2f; /* æ·±ç´…è‰²æ–‡å­— */
}

/* 3x3 å€å¡Šçš„ç²—ç·šåˆ†éš” */

/* å³å´ç²—ç·š */
.cell:nth-child(3n) { border-right-width: 3px; border-right-color: #000; }
.cell:nth-child(9n) { border-right-width: 1px; border-right-color: #ddd; } 

/* åº•éƒ¨ç²—ç·š (ç¬¬ 3 è¡Œå’Œç¬¬ 6 è¡Œçš„åº•éƒ¨) */
.cell:nth-child(n):nth-child(-n + 27) { /* è¡Œ 1-3 */
    /* N/A - ç”± row 3, 6 æ§åˆ¶ */
}
.cell:nth-child(n+19):nth-child(-n+27), /* 3rd row */
.cell:nth-child(n+46):nth-child(-n+54) { /* 6th row */
    border-bottom-width: 3px;
    border-bottom-color: #000;
}
.cell:nth-child(n+1):nth-child(-n+9) {
    border-top: none; /* ç§»é™¤é ‚éƒ¨é‡è¤‡ç·š */
}
/* è™•ç†é‚Šç•Œï¼Œè®“ç²—ç·šåªåœ¨ä¸­é–“å‡ºç¾ */
#sudoku-grid > div:nth-child(27) ~ div:nth-child(36),
#sudoku-grid > div:nth-child(54) ~ div:nth-child(63) {
    /* é€™è£¡çš„é¸å–å™¨åœ¨å¯¦éš›ä½ˆå±€ä¸­éœ€è¦æ›´ç²¾ç¢ºåœ°åŒ¹é…è¡Œå°¾ */
}


/* --- æ•¸å­—é¸æ“‡å€æ¨£å¼ --- */
#number-selection {
    margin: 15px 0;
}

#number-selection button {
    width: 45px;
    height: 45px;
    margin: 4px;
    font-size: 20px;
    font-weight: bold;
    border: 1px solid #ccc;
    background-color: #e0f7fa;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.1s;
}

#number-selection button:hover {
    background-color: #b2ebf2;
}

/* --- æ§åˆ¶æŒ‰éˆ•æ¨£å¼ --- */
#controls button {
    padding: 10px 20px;
    margin: 5px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    transition: background-color 0.2s;
}

#new-game {
    background-color: #4CAF50; /* ç¶ è‰² */
    color: white;
}

#check-solution {
    background-color: #ff9800; /* æ©˜è‰² */
    color: white;
}

#new-game:hover { background-color: #45a049; }
#check-solution:hover { background-color: #fb8c00; }

#message {
    margin-top: 15px;
    font-size: 18px;
    font-weight: bold;
}




</style>


</head>
<body>
    <h1>Sudoku æ•¸ç¨ ğŸ§ </h1>
    <div id="game-container">
        
        <div id="sudoku-grid"></div>

        <div id="number-selection">
            </div>

        <div id="controls">
            <button id="new-game">æ–°éŠæˆ² (New Game)</button>
            <button id="check-solution">æª¢æŸ¥ç­”æ¡ˆ (Check)</button>
            <div id="message"></div>
        </div>
    </div>

  <script>
const GRID_SIZE = 9;
const gridElement = document.getElementById('sudoku-grid');
const selectionElement = document.getElementById('number-selection');
let board = []; // å„²å­˜ç•¶å‰éŠæˆ²ç›¤ç‹€æ…‹ (åŒ…å«ç©å®¶è¼¸å…¥)
let solution = []; // å„²å­˜æ­£ç¢ºç­”æ¡ˆ
let selectedCell = null; // å„²å­˜ç›®å‰è¢«é¸ä¸­çš„å–®å…ƒæ ¼ HTML å…ƒç´ 

// å›ºå®šçš„æ•¸ç¨é¡Œç›®å’Œå…¶è§£
// 0 ä»£è¡¨ç©ºæ ¼
const INITIAL_BOARD = [
    [5, 3, 0, 0, 7, 0, 0, 0, 0],
    [6, 0, 0, 1, 9, 5, 0, 0, 0],
    [0, 9, 8, 0, 0, 0, 0, 6, 0],
    [8, 0, 0, 0, 6, 0, 0, 0, 3],
    [4, 0, 0, 8, 0, 3, 0, 0, 1],
    [7, 0, 0, 0, 2, 0, 0, 0, 6],
    [0, 6, 0, 0, 0, 0, 2, 8, 0],
    [0, 0, 0, 4, 1, 9, 0, 0, 5],
    [0, 0, 0, 0, 8, 0, 0, 7, 9]
];

const SOLVED_BOARD = [
    [5, 3, 4, 6, 7, 8, 9, 1, 2],
    [6, 7, 2, 1, 9, 5, 3, 4, 8],
    [1, 9, 8, 3, 4, 2, 5, 6, 7],
    [8, 5, 9, 7, 6, 1, 4, 2, 3],
    [4, 2, 6, 8, 5, 3, 7, 9, 1],
    [7, 1, 3, 9, 2, 4, 8, 5, 6],
    [9, 6, 1, 5, 3, 7, 2, 8, 4],
    [2, 8, 7, 4, 1, 9, 6, 3, 5],
    [3, 4, 5, 2, 8, 6, 1, 7, 9]
];

/**
 * æº–å‚™æ–°çš„éŠæˆ²ç›¤æ•¸æ“š
 */
function initializeBoard() {
    // ä½¿ç”¨æ·±æ‹·è²ï¼Œé¿å…ç›´æ¥ä¿®æ”¹åŸå§‹é¡Œç›®
    board = JSON.parse(JSON.stringify(INITIAL_BOARD)); 
    solution = SOLVED_BOARD;
}

/**
 * ç¹ªè£½éŠæˆ²ç›¤çš„ HTML å…ƒç´ 
 */
function drawGrid() {
    gridElement.innerHTML = '';
    selectedCell = null; // é‡ç½®é¸ä¸­çš„æ ¼å­

    for (let r = 0; r < GRID_SIZE; r++) {
        for (let c = 0; c < GRID_SIZE; c++) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.dataset.row = r;
            cell.dataset.col = c;
            
            const value = board[r][c];
            if (value !== 0) {
                cell.textContent = value;
                cell.classList.add('fixed-cell'); // é¡Œç›®çµ¦å®šçš„æ•¸å­—
            } else {
                // åªæœ‰ç©ºæ ¼å¯ä»¥è¢«é»æ“Šå’Œè¼¸å…¥
                cell.addEventListener('click', handleCellClick);
            }
            gridElement.appendChild(cell);
        }
    }
}

/**
 * ç¹ªè£½æ•¸å­—é¸æ“‡æŒ‰éˆ• (1-9 å’Œæ¸…é™¤æŒ‰éˆ•)
 */
function drawNumberSelection() {
    selectionElement.innerHTML = '';
    
    // æ•¸å­— 1 åˆ° 9 çš„æŒ‰éˆ•
    for (let i = 1; i <= 9; i++) {
        const button = document.createElement('button');
        button.textContent = i;
        button.addEventListener('click', () => handleNumberSelect(i));
        selectionElement.appendChild(button);
    }
    
    // æ¸…ç©º/åˆªé™¤æŒ‰éˆ• (å‚³é 0 ä»£è¡¨æ¸…ç©º)
    const clearButton = document.createElement('button');
    clearButton.textContent = 'âŒ';
    clearButton.title = 'æ¸…ç©ºæ ¼å­';
    clearButton.addEventListener('click', () => handleNumberSelect(0));
    selectionElement.appendChild(clearButton);
}

/**
 * è™•ç†é»æ“Šæ ¼å­äº‹ä»¶
 */
function handleCellClick(event) {
    // ç§»é™¤ä¸Šä¸€å€‹é¸ä¸­æ ¼å­çš„æ¨£å¼
    if (selectedCell) {
        selectedCell.classList.remove('selected');
    }

    selectedCell = event.target;
    selectedCell.classList.add('selected'); // åŠ å…¥ç•¶å‰é¸ä¸­æ¨£å¼
}

/**
 * è™•ç†é¸æ“‡æ•¸å­—äº‹ä»¶
 */
function handleNumberSelect(number) {
    if (!selectedCell || selectedCell.classList.contains('fixed-cell')) {
        return; 
    }

    const r = parseInt(selectedCell.dataset.row);
    const c = parseInt(selectedCell.dataset.col);

    // æ¸…ç©ºæ•¸å­—
    if (number === 0) {
        selectedCell.textContent = '';
        board[r][c] = 0;
        selectedCell.classList.remove('user-input', 'error');
    } 
    // è¼¸å…¥æ•¸å­—
    else {
        selectedCell.textContent = number;
        board[r][c] = number;
        selectedCell.classList.add('user-input');
        selectedCell.classList.remove('error');
    }
}

/**
 * æª¢æŸ¥ç•¶å‰éŠæˆ²ç›¤ç­”æ¡ˆæ˜¯å¦æ­£ç¢º
 */
function checkSolution() {
    let isCorrect = true;
    let isComplete = true;
    const allCells = gridElement.querySelectorAll('.cell');
    
    allCells.forEach(cell => {
        const r = parseInt(cell.dataset.row);
        const c = parseInt(cell.dataset.col);
        const currentValue = board[r][c];
        
        // é è¨­å…ˆç§»é™¤éŒ¯èª¤æ¨™è¨˜
        cell.classList.remove('error'); 

        if (currentValue === 0) {
            isComplete = false;
            // ç©ºç™½æ ¼å­ä¸æª¢æŸ¥æ­£ç¢ºæ€§ï¼Œåªå½±éŸ¿å®Œæˆåº¦
        } else {
            // æª¢æŸ¥ç©å®¶è¼¸å…¥çš„æ•¸å­—æ˜¯å¦ç­‰æ–¼æ¨™æº–ç­”æ¡ˆ
            if (currentValue !== solution[r][c]) {
                cell.classList.add('error');
                isCorrect = false;
            }
        }
    });
    
    const messageElement = document.getElementById('message');

    if (isCorrect && isComplete) {
        messageElement.textContent = 'ğŸ† æ­å–œï¼æ‚¨æˆåŠŸè§£æ±ºäº†æ•¸ç¨ï¼';
        messageElement.style.color = 'green';
    } else if (isCorrect) {
         messageElement.textContent = 'ç›®å‰è¼¸å…¥çš„æ•¸å­—éƒ½æ­£ç¢ºï¼Œè«‹ç¹¼çºŒå¡«å®Œï¼ğŸ‘';
         messageElement.style.color = 'blue';
    } else {
        messageElement.textContent = 'ğŸš¨ æœ‰éŒ¯èª¤çš„æ•¸å­—ï¼ˆç´…åº•ï¼‰ï¼è«‹æª¢æŸ¥ä¸¦ä¿®æ­£ã€‚';
        messageElement.style.color = 'red';
    }
}

/**
 * å•Ÿå‹•éŠæˆ²æµç¨‹
 */
function startGame() {
    initializeBoard(); // 1. æº–å‚™æ•¸æ“š
    drawGrid();        // 2. ç¹ªè£½æ£‹ç›¤
    drawNumberSelection(); // 3. ç¹ªè£½æŒ‰éˆ•
    document.getElementById('message').textContent = 'æ­¡è¿ä¾†åˆ°æ•¸ç¨ï¼è«‹é»æ“Šæ ¼å­ä¸¦é¸æ“‡æ•¸å­—ã€‚'; // æ¸…ç©ºæç¤ºè¨Šæ¯
    document.getElementById('message').style.color = '#333';
}

// --- äº‹ä»¶ç¶å®š ---
document.getElementById('new-game').addEventListener('click', startGame);
document.getElementById('check-solution').addEventListener('click', checkSolution);

// é¦–æ¬¡åŠ è¼‰æ™‚å•Ÿå‹•éŠæˆ²
startGame();
</script>
</body>
</html>